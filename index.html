<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Notepad Pro</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet"/>
  <style>
    :root {
      --bg-color: #f9f9f9;
      --text-color: #333;
      --primary-color: #4a90e2;
      --secondary-color: #fff;
      --border-color: #e0e0e0;
    }
    .dark-mode {
      --bg-color: #1a1a1a;
      --text-color: #f0f0f0;
      --secondary-color: #2d2d2d;
      --border-color: #444;
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      transition: all 0.3s ease;
    }
    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg-color);
      color: var(--text-color);
      display: flex;
      min-height: 100vh;
    }
    .sidebar {
      width: 260px;
      background-color: var(--secondary-color);
      border-right: 1px solid var(--border-color);
      padding: 20px;
      overflow-y: auto;
      transition: transform 0.3s ease;
    }
    .sidebar.hidden {
      transform: translateX(-100%);
    }
    .sidebar h2 {
      margin-bottom: 10px;
      font-size: 1.2rem;
    }
    .note-history {
      list-style: none;
    }
    .note-history li {
      margin: 6px 0;
      padding: 8px;
      border-radius: 6px;
      background: var(--bg-color);
      cursor: pointer;
    }
    .note-history li:hover {
      background-color: var(--primary-color);
      color: #fff;
    }
    .main {
      flex: 1;
      padding: 24px;
    }
    .toggle-sidebar {
      position: fixed;
      top: 20px;
      left: 20px;
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 10px 12px;
      border-radius: 6px;
      cursor: pointer;
      z-index: 1000;
    }
    .header {
      background: var(--primary-color);
      color: white;
      padding: 16px;
      border-radius: 10px;
      margin-bottom: 16px;
    }
    .note-title {
      width: 100%;
      font-size: 1.2rem;
      padding: 12px;
      margin-bottom: 10px;
      border: none;
      border-radius: 6px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
    }
    .toolbar {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .btn {
      padding: 10px 14px;
      border: none;
      border-radius: 6px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .btn:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    .editor {
      width: 100%;
      min-height: 60vh;
      margin-top: 16px;
      padding: 16px;
      border-radius: 10px;
      border: 1px solid var(--border-color);
      background: var(--secondary-color);
      color: var(--text-color);
      font-size: 1rem;
      resize: vertical;
    }
    #theme-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      font-size: 1.1rem;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <button class="toggle-sidebar" onclick="toggleSidebar()">
    <i class="fas fa-bars"></i>
  </button>

  <aside class="sidebar" id="sidebar">
    <h2>Catatan Saya</h2>
    <ul class="note-history" id="historyList"></ul>
  </aside>

  <main class="main">
    <div class="header">
      <input type="text" class="note-title" id="noteTitle" placeholder="Judul Catatan" />
      <div class="toolbar">
        <button class="btn" onclick="saveNote()">
          <i class="fas fa-save"></i> Simpan
        </button>
        <button class="btn" onclick="newNote()">
          <i class="fas fa-file-alt"></i> Baru
        </button>
        <button class="btn" onclick="downloadNote()">
          <i class="fas fa-download"></i> Download
        </button>
        <label class="btn">
          <i class="fas fa-upload"></i> Upload
          <input type="file" hidden accept=".txt" onchange="uploadNote(event)" />
        </label>
      </div>
    </div>
    <textarea id="editor" class="editor" placeholder="Tulis catatan kamu di sini..."></textarea>
  </main>

  <button id="theme-toggle" onclick="toggleTheme()">
    <i class="fas fa-moon"></i>
  </button>

  <script>
    const sidebar = document.getElementById('sidebar');
    const themeToggle = document.getElementById('theme-toggle');
    const noteTitle = document.getElementById('noteTitle');
    const editor = document.getElementById('editor');
    const historyList = document.getElementById('historyList');

    function toggleSidebar() {
      sidebar.classList.toggle('hidden');
    }

    function toggleTheme() {
      document.body.classList.toggle('dark-mode');
      const icon = themeToggle.querySelector('i');
      icon.classList.toggle('fa-moon');
      icon.classList.toggle('fa-sun');
      localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark-mode' : 'light-mode');
    }

    function saveNote() {
      if (!noteTitle.value.trim()) return alert("Judul tidak boleh kosong!");
      const notes = JSON.parse(localStorage.getItem('notes') || '[]');
      const id = Date.now();
      notes.push({ id, title: noteTitle.value, content: editor.value });
      localStorage.setItem('notes', JSON.stringify(notes));
      localStorage.setItem('currentNote', id);
      alert("Catatan disimpan!");
      loadHistory();
    }

    function newNote() {
      if (!confirm("Catatan sekarang akan dihapus jika belum disimpan. Lanjut?")) return;
      noteTitle.value = "";
      editor.value = "";
      localStorage.removeItem('currentNote');
    }

    function downloadNote() {
      const blob = new Blob([editor.value], { type: 'text/plain' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = `${noteTitle.value || 'catatan'}.txt`;
      a.click();
    }

    function uploadNote(event) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = e => {
        editor.value = e.target.result;
        noteTitle.value = file.name.replace(".txt", "");
      };
      reader.readAsText(file);
    }

    function loadHistory() {
      const notes = JSON.parse(localStorage.getItem('notes') || '[]');
      historyList.innerHTML = '';
      notes.reverse().forEach(note => {
        const li = document.createElement('li');
        li.textContent = note.title;
        li.onclick = () => {
          noteTitle.value = note.title;
          editor.value = note.content;
          localStorage.setItem('currentNote', note.id);
        };
        historyList.appendChild(li);
      });
    }

    function loadLastNote() {
      const id = localStorage.getItem('currentNote');
      const notes = JSON.parse(localStorage.getItem('notes') || '[]');
      const note = notes.find(n => n.id == id);
      if (note) {
        noteTitle.value = note.title;
        editor.value = note.content;
      }
    }

    window.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark-mode') {
        document.body.classList.add('dark-mode');
        themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
      }
      loadHistory();
      loadLastNote();
    });
  </script>
</body>
</html>